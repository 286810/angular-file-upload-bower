/**!
 * AngularJS file upload shim for HTML5 FormData
 * @author  Danial  <danial.farid@gmail.com>
 * @version 1.1.0
 */
(function(){window.XMLHttpRequest&&(XMLHttpRequest=window.FormData?function(d){return function(){var a=new d;a.upload&&(a.setRequestHeader=function(d){return function(b,c){"__uploadProgress_"===b?a.upload.addEventListener("progress",function(a){c(a)},!1):d.apply(a,[b,c])}}(a.setRequestHeader));return a}}(XMLHttpRequest):function(d){return function(){var a=new d,f=a.send;a.__requestHeaders=[];a.setRequestHeader=function(b){return function(c,e){"__uploadProgress_"===c?a.__progress=e:(b.apply(a,[c,e]),
a.__requestHeaders[c]=e)}}(a.setRequestHeader);a.open=function(b){a.upload={addEventListener:function(c,b,d){"progress"==c&&(a.__progress=b)}};return function(c,e,d){b.apply(a,[c,e,d]);a.__url=e}}(a.open);a.getResponseHeader=function(b){return function(c){return a.__fileApiXHR?a.__fileApiXHR.getResponseHeader(c):b.apply(a,[c])}}(a.getResponseHeader);a.getAllResponseHeaders=function(b){return function(){return a.__fileApiXHR?a.__fileApiXHR.getAllResponseHeaders():b.apply(a)}}(a.getAllResponseHeaders);
a.send=function(){if(arguments[0].__formData){var b=arguments[0],c={url:a.__url,files:{file:b.file},complete:function(c,b){Object.defineProperty(a,"status",{get:function(){return b.status}});Object.defineProperty(a,"statusText",{get:function(){return b.statusText}});Object.defineProperty(a,"readyState",{get:function(){return 4}});Object.defineProperty(a,"response",{get:function(){return b.response}});Object.defineProperty(a,"responseText",{get:function(){return b.responseText}});a.__fileApiXHR=b;
a.onreadystatechange()},progress:function(b){a.__progress(b)},headers:a.__requestHeaders,data:{}};for(key in b)"file"!=key&&"append"!=key&&"__formData"!=key&&(c.data[key]=b[key]);FileAPI.upload(c)}else f.apply(a,arguments)};return a}}(XMLHttpRequest));window.FormData||(HTMLInputElement.prototype.addEventListener=HTMLInputElement.prototype.attachEvent=function(d){return function(a,f,b,c){if("change"!==a.toLowerCase()&&"onchange"!==a.toLowerCase()||"file"!=this.getAttribute("type"))d.apply(this,[a,
f,b,c]);else{if(!this.__isWrapped&&(null!=this.getAttribute("ng-file-select")||null!=this.getAttribute("data-ng-file-select"))){var e=document.createElement("div");e.innerHTML='<div class="js-fileapi-wrapper" style="position:relative; overflow:hidden"></div>';var e=e.firstChild,g=this.parentNode;g.insertBefore(e,this);g.removeChild(this);e.appendChild(this);this.__isWrapped=!0}d.apply(this,[a,function(a){var b=FileAPI.getFiles(a);a.target||(a.target={});a.target.files=b;a.target.files.item=function(b){return a.target.files[b]||
null};f(a)},b,c])}}}(HTMLInputElement.prototype.addEventListener||HTMLInputElement.prototype.attachEvent),window.FormData=FormData=function(){return{append:function(d,a){this[d]=a},__formData:!0}},function(){if(!window.FileAPI||!FileAPI.upload){var d="",a=document.createElement("script"),f=document.getElementsByTagName("script"),b,c,e;if(window.FileAPI&&window.FileAPI.jsPath)d=window.FileAPI.jsPath;else for(b=0;b<f.length;b++)if(e=f[b].src,c=e.indexOf("angular-file-upload-shim.js"),-1==c&&(c=e.indexOf("angular-file-upload-shim.min.js")),
-1<c){d=e.substring(0,c);break}window.FileAPI&&null!=FileAPI.staticPath||(FileAPI={staticPath:d});a.setAttribute("src",d+"FileAPI.min.js");document.getElementsByTagName("head")[0].appendChild(a)}}())})();
